{% extends 'base.html' %}

{% block link_css %}
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/rps.css')}}">
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/sumo.css')}}">
{% endblock %}

{% block content %}
    <div id="content">
        <h1 class="rps-title">Enhanced Sustainable Traffic Control for SDG 11</h1>

        <p class="rps-description">
            An intelligent traffic signal control system using reinforcement learning to optimize sustainability metrics at urban intersections,
            aligned with UN Sustainable Development Goal 11.
        </p>

        <div class="rps-gallery">
            <div class="rps-image-container">
                <div class="rps-caption">2-way Intersection Model</div>
                <img src="{{ url_for('static', filename='files/sumo_1.png') }}" alt="SUMO Traffic Simulation" class="rps-image" onclick="openModal(this.src)">
            </div>

            <div class="rps-image-container">
                <div class="rps-caption">Performance Metrics</div>
                <img src="{{ url_for('static', filename='files/sumo_3.png') }}" alt="Performance Metrics" class="rps-image" onclick="openModal(this.src)">
            </div>

            <div class="rps-image-container">
                <div class="rps-caption">Learning Curve</div>
                <img src="{{ url_for('static', filename='files/sumo_2.png') }}" alt="Learning Curve" class="rps-image" onclick="openModal(this.src)">
            </div>
        </div>

        <!-- Modal for fullscreen image view -->
        <div id="imageModal" class="modal">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="modalImg">
        </div>

        <div class="key-features">
            <div class="feature-item">
                <div class="feature-title">Multi-objective Reward</div>
                <p style="color: #aaa;">Balances waiting time, CO2 emissions, and throughput with weights (0.7, 0.2, 0.1)</p>
            </div>

            <div class="feature-item">
                <div class="feature-title">Experience Replay</div>
                <p style="color: #aaa;">Buffer stores 2000 transitions, prioritizing high-negative-reward states</p>
            </div>
        </div>

        <div class="results-list">
            <div class="result-item">
                <div class="result-value">70-80%</div>
                <div class="result-label">REDUCTION IN WAITING TIME</div>
            </div>

            <div class="result-item">
                <div class="result-value">50%+</div>
                <div class="result-label">DECREASE IN COâ‚‚ EMISSIONS</div>
            </div>

            <div class="result-item">
                <div class="result-value">500</div>
                <div class="result-label">TRAINING EPISODES</div>
            </div>
        </div>

        <div class="rps-tech">
            <span class="tech-tag">SUMO-RL</span>
            <span class="tech-tag">Python</span>
            <span class="tech-tag">Q-Learning</span>
            <span class="tech-tag">SDG 11</span>
        </div>

        <a href="https://github.com/Jakub-Nowicki/sumo_project" target="_blank" class="github-link">
            <i class="fab fa-github" style="margin-right: 8px;"></i> View on GitHub
        </a>
    </div>

    <script src="{{ url_for('static', filename='js/sumo.js') }}"></script>
{% endblock %}